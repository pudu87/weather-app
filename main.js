(()=>{const e=document.querySelector("#location"),t=document.querySelector("form"),n=document.querySelector(".city"),o=document.querySelector(".temp span"),r=document.querySelector(".arrow"),a=document.querySelector(".speed"),c=document.querySelector(".weather img"),i=document.querySelector(".pressure span"),s=document.querySelector(".humidity span");async function u(e){try{const t=await fetch("http://api.openweathermap.org/data/2.5/weather?q="+e+"&appid=30aa43e809e468d20a5ff0a5e98a95ab",{mode:"cors"}),u=await t.json();!function(e){n.textContent=e.name;const t=Math.round(e.temp-273.15);o.textContent=`${t} Â°C`,r.style.rotate=e.windDir-180+"deg",a.textContent=`${e.windSpeed} m/s`,c.src=`http://openweathermap.org/img/wn/${e.icon}@2x.png`,i.textContent=`${e.pressure} hPa`,s.textContent=`${e.humidity} %`}(d(u)),console.log(u),console.log(d(u))}catch(e){console.log(e)}}function d(e){const t=e.sys.sunrise<e.dt&&e.dt<e.sys.sunset;return{name:e.name,temp:e.main.temp,windDir:e.wind.deg,windSpeed:e.wind.speed,icon:e.weather[0].icon,pressure:e.main.pressure,humidity:e.main.humidity,day:t}}u("Santiago"),t.addEventListener("submit",(function(t){t.preventDefault(),u(e.value.replace(/\s+/g,""))}))})();