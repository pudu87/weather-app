(()=>{const e=document.querySelector("#location"),t=document.querySelector("form"),n=document.querySelector(".city"),o=document.querySelector(".temp-quantity"),r=document.querySelector(".temp-unit"),a=document.querySelector(".temp-switch"),c=document.querySelector(".arrow"),i=document.querySelector(".speed"),u=document.querySelector(".weather img"),d=document.querySelector(".pressure span"),s=document.querySelector(".humidity span"),m=document.querySelector("#data"),p=document.querySelector("#loading"),l={};function y(){m.classList.toggle("hidden"),p.classList.toggle("hidden")}async function h(e){try{y(),await new Promise((e=>setTimeout(e,2e3)));const t=await fetch("http://api.openweathermap.org/data/2.5/weather?q="+e+"&appid=30aa43e809e468d20a5ff0a5e98a95ab",{mode:"cors"});!function(e){const t=e.sys.sunrise<e.dt&&e.dt<e.sys.sunset;l.name=e.name,l.temp=e.main.temp,l.windDir=e.wind.deg,l.windSpeed=e.wind.speed,l.icon=e.weather[0].icon,l.pressure=e.main.pressure,l.humidity=e.main.humidity,l.day=t}(await t.json()),n.textContent=l.name,w(l.temp),w(l.temp),c.style.rotate=l.windDir-180+"deg",i.textContent=`${l.windSpeed} m/s`,u.src=`http://openweathermap.org/img/wn/${l.icon}@2x.png`,d.textContent=`${l.pressure} hPa`,s.textContent=`${l.humidity} %`,y()}catch(e){console.log(e)}}function w(){"°C"===r.textContent?(o.textContent=Math.round(9*(l.temp-273.15)/5+32),r.textContent="°K"):(o.textContent=Math.round(l.temp-273.15),r.textContent="°C")}h("Santiago"),t.addEventListener("submit",(function(t){t.preventDefault(),h(e.value.replace(/\s+/g,"+"))})),a.addEventListener("click",w)})();