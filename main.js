(()=>{const e=document.querySelector("#location"),t=document.querySelector("form"),n=document.querySelector(".city"),o=document.querySelector(".temp-quantity"),r=document.querySelector(".temp-unit"),a=document.querySelector(".temp-switch"),c=document.querySelector(".arrow"),i=document.querySelector(".speed"),u=document.querySelector(".weather img"),d=document.querySelector(".pressure span"),m=document.querySelector(".humidity span"),s={};async function p(e){try{const t=await fetch("http://api.openweathermap.org/data/2.5/weather?q="+e+"&appid=30aa43e809e468d20a5ff0a5e98a95ab",{mode:"cors"});!function(e){const t=e.sys.sunrise<e.dt&&e.dt<e.sys.sunset;s.name=e.name,s.temp=e.main.temp,s.windDir=e.wind.deg,s.windSpeed=e.wind.speed,s.icon=e.weather[0].icon,s.pressure=e.main.pressure,s.humidity=e.main.humidity,s.day=t}(await t.json()),n.textContent=s.name,y(s.temp),y(s.temp),c.style.rotate=s.windDir-180+"deg",i.textContent=`${s.windSpeed} m/s`,u.src=`http://openweathermap.org/img/wn/${s.icon}@2x.png`,d.textContent=`${s.pressure} hPa`,m.textContent=`${s.humidity} %`}catch(e){console.log(e)}}function y(){"°C"===r.textContent?(o.textContent=Math.round(9*(s.temp-273.15)/5+32),r.textContent="°K"):(o.textContent=Math.round(s.temp-273.15),r.textContent="°C")}p("Santiago"),t.addEventListener("submit",(function(t){t.preventDefault(),p(e.value.replace(/\s+/g,"+"))})),a.addEventListener("click",y)})();